<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="bootstrap/bootstrap.min.css">
		<link rel="stylesheet" href="bootstrap/bootstrap-theme.min.css">
		<link rel="stylesheet" href="yadcf-0.9.3/jquery.dataTables.yadcf.css">
		<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.css">
		<link rel="stylesheet" type="text/css" href="flags/flags.min.css">

		<script src="js/jquery-3.3.1.min.js"></script>
		<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>
		<script src="bootstrap/bootstrap.min.js"></script>
		<script src="yadcf-0.9.3/jquery.dataTables.yadcf.js"></script>
		<!--<script src="yadcf-0.9.3/dom_source_select2_example.js"></script>-->
		<script src="yadcf-0.9.3/select2.js"></script>
		<!--<script src="yadcf-0.9.3/shBrushJScript.js"></script>-->
		<script src="yadcf-0.9.3/shCore.js"></script>
		<script src="WeaponData.js"></script>
		<script src="MaterialData.js"></script>
		<script src="SkillNames.js"></script>
		<script src="Characters.js"></script>
		<script src="Offsets.js"></script>
		<script src="Items.js"></script>
		
		
		<script>
			var SaveData = {
				Lang: LoadLang(),
				Weapons: LoadWeaponData(),
				WeaponObj: {},
				SkillNames: LoadSkillNames(),
				Offsets: LoadOffsets(),
				Items: LoadItems(),
				Material: LoadMaterial(),
				MaterialObj: {},
				Characters: LoadCharacters(),
				CharacterObj: {},
			}
			
			function LoadLang() {
				var savedLang = localStorage.getItem('EditorLanguage');
				if(savedLang == null) {
					localStorage.setItem('EditorLanguage','EN');
					savedLang = 'EN'
				}
				setTimeout(function() {
					$('#Lang_' + savedLang).css('display','none');
				});
				return savedLang
			}
			
			function SetLang(newLang) {
				localStorage.setItem('EditorLanguage',newLang);
				location.reload();
			}
						
			/*DecryptedFile.LoadedCharacterOffset = 0x0
			DecryptedFile.Badges = {
				attack: [ 
					[0x0,1], 
					[0x0,2], 
					[0x0,4],
					[0x0,8], 
					[0x2,4], 
					[0x2,8],
					[0x2,16], 
					[0x2,1], 
					[0x2,2], 
					[0x3,1], 
					[0x3,2], 
					[0x3,4], 
					[0x3,8], 
					[0x3,16],
					[0x3,32], 
					[0x2,32], 
					[0x2,64],
					[0x2,128] 
				],
				def: [
					[0x4,2],
					[0x4,4],
					[0x4,8],
					[0x4,128],
					[0x5,1],
					[0x5,2],
					[0x5,4],
					[0x5,8],
					[0x5,16],
					[0x5,32],
					[0x5,64],
					[0x5,128],
					[0x6,1],
					[0x6,2],
					[0x6,4],
					[0x6,8],
					[0x6,16],
					[0x6,32],
					[0x3,64],
					[0x3,128],
					[0x4,1],
					[0x4,16],
					[0x4,32],
					[0x4,64],
				],
				support: [
					[0x7,64],
					[0x7,128],
					[0x8,1],
					[0x6,64],
					[0x6,128],
					[0x7,1],
					[0x7,2],
					[0x7,4],
					[0x7,8],
					[0x7,16],
					[0x7,32]				
				]
			};*/

			function handleFileSelect() {               
				if (!window.File || !window.FileReader || !window.FileList || !window.Blob) {
					alert('The File APIs are not fully supported in this browser.');
					return;
				}   

				input = document.getElementById('fileinput');
				if (!input) {
					alert("Um, couldn't find the fileinput element.");
				}
				else if (!input.files) {
					alert("This browser doesn't seem to support the `files` property of file inputs.");
				}
				else if (!input.files[0]) {
					alert("Please select a file before clicking 'Load'");               
				}
				else {
					file = input.files[0];
					fr = new FileReader();
					fr.onload = receivedText;
					fr.readAsArrayBuffer(file);
				}
			}
			
			function receivedText() {
				SaveData.saveGame = new Uint8Array(fr.result);
				
				
				ScanMaterial('Bronze')
				ScanMaterial('Silver')
				ScanMaterial('Gold')
				
				$('#Rupees').val(readInt32(SaveData.Offsets.General.Rupees))
				
				
				for(let i = 0;i < SaveData.Characters.length;i++){
					$('#Character_Edit_Select').append('<option value="' + i + '">' + SaveData.Characters[i].Name[SaveData.Lang] + '</option>')
				}
				LoadCharacterEdit()
				

				LoadWeapons()
				
				$('#Weapons_Table > thead > tr').find('th').eq(0).css('position','relative')
				
				$('#Weapons_Table > thead > tr').find('th').eq(1).css('position','relative')
				$('#Weapons_Table > thead > tr').find('th').eq(2).css('position','relative')

				LoadAddFilter();
				
				for(let i = 0; i < SaveData.SkillNames.length; i++) {
					if(SaveData.SkillNames[i]) {
						for(let z = 1; z <= 8; z++) {
							$('#WeaponEditSkill_' + z).append('<option value="'+ i +'">' + SaveData.SkillNames[i].Name[SaveData.Lang] + '</option>')
						}
					}
				}
				
				var DisableButton = true
				for(let i = 0; i < 12; i++) {
					if (SaveData.saveGame[SaveData.Offsets.General.DiscoverMaterials + i] != 0xFF) {
						console.log(i)
						DisableButton = false
					}
				}
				if (SaveData.saveGame[SaveData.Offsets.General.DiscoverMaterials + 12] != 0x3F) {
						console.log(12)
					DisableButton = false
				}
				$('#DiscoverAllMaterials').prop('disabled',DisableButton)
				

				$('#MainEditContainer').css('display','block');
			}
			
			//------------ HexEdit Funcs
			
			function d2h(d) {
				return (d / 256 + 1 / 512).toString(16).substring(2, 4);
			}
		
			function parseHexString(str) { 
				var result = [];
				while (str.length >= 2) { 
					result.push(parseInt(str.substring(0, 2), 16));
					str = str.substring(2, str.length);
				}
				return result;
			}
			
			function readInt32(startPos) {
				var newArr = [SaveData.saveGame[startPos + 3],SaveData.saveGame[startPos + 2],SaveData.saveGame[startPos + 1],SaveData.saveGame[startPos]]
				var result=0;
				for (let i=3;i>=0;i--) {
					result+=newArr[3-i]<<(8*i);
				}
				return result;
			};
			
			function writeInt32(startPos, val) {
				val &= 0xFFFFFFFF;
				var hex = val.toString(16).toUpperCase();
				var endValue = ("00000000" + hex).slice(-8)
				var Values = parseHexString(endValue)
				SaveData.saveGame[startPos] = Values[3]
				SaveData.saveGame[startPos+1] = Values[2]
				SaveData.saveGame[startPos+2] = Values[1]
				SaveData.saveGame[startPos+3] = Values[0]
			}
	
			function readInt16(startPos) {
				var HexNr = d2h(SaveData.saveGame[startPos + 1]) + d2h(SaveData.saveGame[startPos])
				return parseInt(HexNr,16)
			};
			
			function writeInt16(startPos, val) {
				val &= 0xFFFFFFFF;
				var hex = val.toString(16).toUpperCase();
				var endValue = ("00000000" + hex).slice(-4)
				var Values = parseHexString(endValue)
				SaveData.saveGame[startPos+1] = Values[0]
				SaveData.saveGame[startPos] = Values[1]
			}
			
			function readInt08(startPos) {
				return SaveData.saveGame[startPos]
			}
			
			function writeInt08(startPos, val) {
				SaveData.saveGame[startPos] = val
			}

			//------------ Material Stuff
			
			function ScanMaterial(rarity) {
				for (let i = 0;i < SaveData.Material[rarity].length; i++){
					var currentValue = readInt16(SaveData.Offsets.General.Material + (SaveData.Material[rarity][i].Offset * 2))
					var NewMaterial = "";
					if(!SaveData.MaterialObj[rarity + '_Added']){
						SaveData.MaterialObj[rarity + '_Added'] = true
						NewMaterial += '<div class="row">'
					}else{
						NewMaterial += '<div class="row" style="margin-top: 10px;">'
					}
					NewMaterial += '<div>'
					NewMaterial += '<span style="margin-left: 15px;line-height: 34px;">' + SaveData.Material[rarity][i].Name[SaveData.Lang] + '</span>'
					NewMaterial += '<input value="' + currentValue + '" type="text" id="Material_' + rarity + '_' + i + '" class="form-control" style="display: inline-block;width: 30%;float: right;margin-right: 15px;" onchange="VerifyInput($(this),999,1,\'' + rarity + '\');" onkeyup="VerifyInput($(this),999,1,\'' + rarity + '\');">'
					NewMaterial += '</div>'
					NewMaterial += '</div>'
					
					$('#Material_Panel_Body_' + rarity).append(NewMaterial);
				}
			}
			
			function DiscoverAllMaterials() {
				for(let i = 0; i < 12; i++) {
					SaveData.saveGame[SaveData.Offsets.General.DiscoverMaterials + i] = 0xFF
				}
				SaveData.saveGame[SaveData.Offsets.General.DiscoverMaterials + 12] = 0x3F
				$('#DiscoverAllMaterials').prop('disabled','true')
			}

			//------------ Character Stuff
			
			function CreateCharacterObj(characterID) {
				SaveData.CharacterObj.ID =			characterID
				SaveData.CharacterObj.Name =		SaveData.Characters[characterID].Name[SaveData.Lang]
				SaveData.CharacterObj.Unlocked =	readInt08(SaveData.Offsets.Characters.Base + SaveData.Characters[characterID].Offset + 0x0A) // 1 Byte
				SaveData.CharacterObj.Unknown =		readInt08(SaveData.Offsets.Characters.Base + SaveData.Characters[characterID].Offset + 0x0B) // 1 Byte
				SaveData.CharacterObj.Attack =		readInt16(SaveData.Offsets.Characters.Base + SaveData.Characters[characterID].Offset + 0x0C) // 2 Bytes
				SaveData.CharacterObj.Unknown2 =	readInt16(SaveData.Offsets.Characters.Base + SaveData.Characters[characterID].Offset + 0x0E) // 2 Bytes
				SaveData.CharacterObj.Health =		readInt16(SaveData.Offsets.Characters.Base + SaveData.Characters[characterID].Offset + 0x10) // 2 Bytes // Totally unsure, but it seems to it in some way...
				SaveData.CharacterObj.Experience =	readInt32(SaveData.Offsets.Characters.Base + SaveData.Characters[characterID].Offset + 0x12) // 4 Bytes
				SaveData.CharacterObj.Unknown3 =	readInt32(SaveData.Offsets.Characters.Base + SaveData.Characters[characterID].Offset + 0x16) // 4 Bytes
				SaveData.CharacterObj.Level =		readInt08(SaveData.Offsets.Characters.Base + SaveData.Characters[characterID].Offset + 0x1A) + 1 // 1 Byte
				SaveData.CharacterObj.HeartContainers =	readInt08(SaveData.Offsets.Characters.Base + SaveData.Characters[characterID].Offset + 0x1B) // 1 Byte
			}
			
			function UpdateCharacterObj(characterID) {
				SaveData.CharacterObj.Unlocked = $('#CharacterEdit_Unlocked_' + characterID).val()
				SaveData.CharacterObj.Unknown = $('#CharacterEdit_Unknown_' + characterID).val()
				SaveData.CharacterObj.Attack = $('#CharacterEdit_Attack_' + characterID).val()
				SaveData.CharacterObj.Unknown2 = $('#CharacterEdit_Unknown2_' + characterID).val()
				SaveData.CharacterObj.Health = $('#CharacterEdit_Health_' + characterID).val()
				SaveData.CharacterObj.Experience = $('#CharacterEdit_Exp_' + characterID).val()
				SaveData.CharacterObj.Unknown3 = $('#CharacterEdit_Unknown3_' + characterID).val()
				SaveData.CharacterObj.Level = $('#CharacterEdit_Level_' + characterID).val() - 1
				SaveData.CharacterObj.HeartContainers = $('#CharacterEdit_HeartContainers_' + characterID).val()
				SaveCurrentProcess()
			}
			
			function LoadCharacterEdit() {
				var CharacterID = $('#Character_Edit_Select').val()
				CreateCharacterObj(CharacterID)

				var CharacterEditHTML = "";			
				CharacterEditHTML += '<div class="row">'
				CharacterEditHTML += '<div>'
				CharacterEditHTML += '<span style="margin-left: 15px;line-height: 34px;">Unlocked</span>'
				CharacterEditHTML += '<input value="' + SaveData.CharacterObj.Unlocked + '" type="tel" id="CharacterEdit_Unlocked_' + CharacterID + '" class="form-control" style="display: inline-block;width: 50%;float: right;margin-right: 15px;" onchange="VerifyInput($(this),1);UpdateCharacterObj(' + CharacterID + ');" onkeyup="VerifyInput($(this),1);UpdateCharacterObj(' + CharacterID + ');">'
				CharacterEditHTML += '</div>'
				CharacterEditHTML += '</div>'
				
				CharacterEditHTML += '<div class="row" style="margin-top: 10px;">'
				CharacterEditHTML += '<div>'
				CharacterEditHTML += '<span style="margin-left: 15px;line-height: 34px;">Unknown</span>'
				CharacterEditHTML += '<input value="' + SaveData.CharacterObj.Unknown + '" type="tel" id="CharacterEdit_Unknown_' + CharacterID + '" class="form-control" style="display: inline-block;width: 50%;float: right;margin-right: 15px;" onchange="VerifyInput($(this),255);UpdateCharacterObj(' + CharacterID + ');" onkeyup="VerifyInput($(this),255);UpdateCharacterObj(' + CharacterID + ');">'
				CharacterEditHTML += '</div>'
				CharacterEditHTML += '</div>'

				CharacterEditHTML += '<div class="row" style="margin-top: 10px;">'
				CharacterEditHTML += '<div>'
				CharacterEditHTML += '<span style="margin-left: 15px;line-height: 34px;">Experience</span>'
				CharacterEditHTML += '<input value="' + SaveData.CharacterObj.Experience + '" type="tel" id="CharacterEdit_Exp_' + CharacterID + '" class="form-control" style="display: inline-block;width: 50%;float: right;margin-right: 15px;" onchange="VerifyInput($(this),12842457);UpdateCharacterObj(' + CharacterID + ');" onkeyup="VerifyInput($(this),12842457);UpdateCharacterObj(' + CharacterID + ');">'
				CharacterEditHTML += '</div>'
				CharacterEditHTML += '</div>'
				
				CharacterEditHTML += '<div class="row" style="margin-top: 10px;">'
				CharacterEditHTML += '<div>'
				CharacterEditHTML += '<span style="margin-left: 15px;line-height: 34px;">Unknown2</span>'
				CharacterEditHTML += '<input value="' + SaveData.CharacterObj.Unknown2 + '" type="tel" id="CharacterEdit_Unknown2_' + CharacterID + '" class="form-control" style="display: inline-block;width: 50%;float: right;margin-right: 15px;" onchange="VerifyInput($(this),65535);UpdateCharacterObj(' + CharacterID + ');" onkeyup="VerifyInput($(this),65535);UpdateCharacterObj(' + CharacterID + ');">'
				CharacterEditHTML += '</div>'
				CharacterEditHTML += '</div>'
			
				CharacterEditHTML += '<div class="row" style="margin-top: 10px;">'
				CharacterEditHTML += '<div>'
				CharacterEditHTML += '<span style="margin-left: 15px;line-height: 34px;">Level</span>'
				CharacterEditHTML += '<input value="' + SaveData.CharacterObj.Level + '" type="tel" id="CharacterEdit_Level_' + CharacterID + '" class="form-control" style="display: inline-block;width: 50%;float: right;margin-right: 15px;" onchange="VerifyInput($(this), 255);UpdateCharacterObj(' + CharacterID + ');" onkeyup="VerifyInput($(this), 255);UpdateCharacterObj(' + CharacterID + ');">'
				CharacterEditHTML += '</div>'
				CharacterEditHTML += '</div>'
				
				CharacterEditHTML += '<div class="row" style="margin-top: 10px;">'
				CharacterEditHTML += '<div>'
				CharacterEditHTML += '<span style="margin-left: 15px;line-height: 34px;">Attack</span>'
				CharacterEditHTML += '<input value="' + SaveData.CharacterObj.Attack + '" type="tel" id="CharacterEdit_Attack_' + CharacterID + '" class="form-control" style="display: inline-block;width: 50%;float: right;margin-right: 15px;" onchange="VerifyInput($(this),9999);UpdateCharacterObj(' + CharacterID + ');" onkeyup="VerifyInput($(this),9999);UpdateCharacterObj(' + CharacterID + ');">'
				CharacterEditHTML += '</div>'
				CharacterEditHTML += '</div>'
				
				CharacterEditHTML += '<div class="row" style="margin-top: 10px;">'
				CharacterEditHTML += '<div>'
				CharacterEditHTML += '<span style="margin-left: 15px;line-height: 34px;">Unknown3</span>'
				CharacterEditHTML += '<input value="' + SaveData.CharacterObj.Unknown3 + '" type="tel" id="CharacterEdit_Unknown3_' + CharacterID + '" class="form-control" style="display: inline-block;width: 50%;float: right;margin-right: 15px;" onchange="VerifyInput($(this),4294967295);UpdateCharacterObj(' + CharacterID + ');" onkeyup="VerifyInput($(this),4294967295);UpdateCharacterObj(' + CharacterID + ');">'
				CharacterEditHTML += '</div>'
				CharacterEditHTML += '</div>'

				CharacterEditHTML += '<div class="row" style="margin-top: 10px;">'
				CharacterEditHTML += '<div>'
				CharacterEditHTML += '<span style="margin-left: 15px;line-height: 34px;">Health</span>'
				CharacterEditHTML += '<input value="' + SaveData.CharacterObj.Health + '" type="tel" id="CharacterEdit_Health_' + CharacterID + '" class="form-control" style="display: inline-block;width: 50%;float: right;margin-right: 15px;" onchange="VerifyInput($(this),99999);UpdateCharacterObj(' + CharacterID + ');" onkeyup="VerifyInput($(this),99999);UpdateCharacterObj(' + CharacterID + ');">'
				CharacterEditHTML += '</div>'
				CharacterEditHTML += '</div>'
				
				CharacterEditHTML += '<div class="row" style="margin-top: 10px;">'
				CharacterEditHTML += '<div>'
				CharacterEditHTML += '<span style="margin-left: 15px;line-height: 34px;">HeartContainers</span>'
				CharacterEditHTML += '<input value="' + SaveData.CharacterObj.HeartContainers + '" type="tel" id="CharacterEdit_HeartContainers_' + CharacterID + '" class="form-control" style="display: inline-block;width: 50%;float: right;margin-right: 15px;" onchange="VerifyInput($(this),3);UpdateCharacterObj(' + CharacterID + ');" onkeyup="VerifyInput($(this),3);UpdateCharacterObj(' + CharacterID + ');">'
				CharacterEditHTML += '</div>'
				CharacterEditHTML += '</div>'
				
				CharacterEditHTML += '<div class="row" style="margin-top: 10px;">'
				CharacterEditHTML += '<div>'
				CharacterEditHTML += '<button type="button" class="btn btn-warning" onclick="LoadBadges();" style="width:calc(100% - 30px);margin-left:15px;" disabled>Edit Badges</button>'
				CharacterEditHTML += '</div>'
				CharacterEditHTML += '</div>'
				
				$('#Character_Panel_Body').html(CharacterEditHTML);
			}

			//------------ Weapon Stuff
			
			function ScanWeaponInfo(SearchWeaponID) {
				for (var Character in SaveData.Weapons){
					for(var Class in SaveData.Weapons[Character]) {
						for(var Weapon in SaveData.Weapons[Character][Class].Weapons) {
							if(SaveData.Weapons[Character][Class].Weapons[Weapon].WeaponID == SearchWeaponID) {
								var CharacterName = ""
								for(var q = 0; q < SaveData.Characters.length; q++) {
									if(SaveData.Characters[q].Name.EN == Character) {
										CharacterName = SaveData.Characters[q].Name[SaveData.Lang]
									}
								}
								return [CharacterName,SaveData.Weapons[Character][Class].ClassName[SaveData.Lang],SaveData.Weapons[Character][Class].Weapons[Weapon].Name[SaveData.Lang],Character]
							}
						}
					}
				}
			}

			function CreateWeaponObj(currentOffset, rowID) {
				SaveData.WeaponObj.KillsToUnlockSkill_1 = 	readInt16(currentOffset + 0x00)
				SaveData.WeaponObj.KillsToUnlockSkill_2 = 	readInt16(currentOffset + 0x02)
				SaveData.WeaponObj.KillsToUnlockSkill_3 = 	readInt16(currentOffset + 0x04)
				SaveData.WeaponObj.KillsToUnlockSkill_4 = 	readInt16(currentOffset + 0x06)
				SaveData.WeaponObj.KillsToUnlockSkill_5 = 	readInt16(currentOffset + 0x08)
				SaveData.WeaponObj.KillsToUnlockSkill_6 = 	readInt16(currentOffset + 0x0A)
				SaveData.WeaponObj.KillsToUnlockSkill_7 = 	readInt16(currentOffset + 0x0C)
				SaveData.WeaponObj.KillsToUnlockSkill_8 = 	readInt16(currentOffset + 0x0E)
				SaveData.WeaponObj.ID = 					readInt16(currentOffset + 0x10)
				if(SaveData.WeaponObj.ID != 65535 && SaveData.WeaponObj.ID < 212) {
					SaveData.WeaponObj.Power = 					readInt16(currentOffset + 0x12)
					SaveData.WeaponObj.Stars = 					readInt16(currentOffset + 0x14)
					SaveData.WeaponObj.Skill_1 =				{ID: SaveData.saveGame[currentOffset + 0x16], Name: SaveData.SkillNames[SaveData.saveGame[currentOffset + 0x16]].Name[SaveData.Lang]}
					SaveData.WeaponObj.Skill_2 =				{ID: SaveData.saveGame[currentOffset + 0x17], Name: SaveData.SkillNames[SaveData.saveGame[currentOffset + 0x17]].Name[SaveData.Lang]}
					SaveData.WeaponObj.Skill_3 =				{ID: SaveData.saveGame[currentOffset + 0x18], Name: SaveData.SkillNames[SaveData.saveGame[currentOffset + 0x18]].Name[SaveData.Lang]}
					SaveData.WeaponObj.Skill_4 =				{ID: SaveData.saveGame[currentOffset + 0x19], Name: SaveData.SkillNames[SaveData.saveGame[currentOffset + 0x19]].Name[SaveData.Lang]}
					SaveData.WeaponObj.Skill_5 =				{ID: SaveData.saveGame[currentOffset + 0x1A], Name: SaveData.SkillNames[SaveData.saveGame[currentOffset + 0x1A]].Name[SaveData.Lang]}
					SaveData.WeaponObj.Skill_6 =				{ID: SaveData.saveGame[currentOffset + 0x1B], Name: SaveData.SkillNames[SaveData.saveGame[currentOffset + 0x1B]].Name[SaveData.Lang]}
					SaveData.WeaponObj.Skill_7 =				{ID: SaveData.saveGame[currentOffset + 0x1C], Name: SaveData.SkillNames[SaveData.saveGame[currentOffset + 0x1C]].Name[SaveData.Lang]}
					SaveData.WeaponObj.Skill_8 =				{ID: SaveData.saveGame[currentOffset + 0x1D], Name: SaveData.SkillNames[SaveData.saveGame[currentOffset + 0x1D]].Name[SaveData.Lang]}
					SaveData.WeaponObj.Identifier =				SaveData.saveGame[currentOffset + 0x1E]
					SaveData.WeaponObj.currentOffset =			currentOffset
					SaveData.WeaponObj.rowID =					rowID
					var WeaponInfo = ScanWeaponInfo(SaveData.WeaponObj.ID)
					SaveData.WeaponObj.Character =				WeaponInfo[0]
					SaveData.WeaponObj.Type =					WeaponInfo[1]
					SaveData.WeaponObj.Name =					WeaponInfo[2]
					SaveData.WeaponObj.CharacterEN = 			WeaponInfo[3]
				}
			}
			
			function UpdateWeaponObj() {
				for(var i = 1; i < 9;i++) {
					SaveData.WeaponObj['KillsToUnlockSkill_' + i] = $('#WeaponEditLocked_' + i).val()
				}
				SaveData.WeaponObj.ID = $('#WeaponEditName').val()
				SaveData.WeaponObj.Power = $('#WeaponEditAttack').val()
				SaveData.WeaponObj.Stars = $('#WeaponEditStars').val()
				for(var i = 1; i < 9;i++) {
					SaveData.WeaponObj['Skill_' + i] = {ID: $('#WeaponEditSkill_' + i).val(), Name: SaveData.SkillNames[$('#WeaponEditSkill_' + i).val()].Name[SaveData.Lang]}
				}
				var WeaponInfo = ScanWeaponInfo($('#WeaponEditName').val())
				SaveData.WeaponObj.Character =				WeaponInfo[0]
				SaveData.WeaponObj.Type =					WeaponInfo[1]
				SaveData.WeaponObj.Name =					WeaponInfo[2]
				SaveData.WeaponObj.CharacterEN = 			WeaponInfo[3]
				SaveCurrentProcess()
				
				var row = $('#WeaponEditRow_' + SaveData.WeaponObj.rowID)
				var rowData = SaveData.dataTable.row(row).data();
				var rowIndex = SaveData.dataTable.row(row).index();
				
				rowData[0] = SaveData.WeaponObj.Character
				rowData[1] = SaveData.WeaponObj.Type
				rowData[2] = SaveData.WeaponObj.Name
				rowData[3] = SaveData.WeaponObj.Power
				rowData[4] = SaveData.WeaponObj.Stars
				rowData[5] = SaveData.WeaponObj.Skill_1.Name
				rowData[6] = SaveData.WeaponObj.Skill_2.Name
				rowData[7] = SaveData.WeaponObj.Skill_3.Name;
				rowData[8] = SaveData.WeaponObj.Skill_4.Name
				rowData[9] = SaveData.WeaponObj.Skill_5.Name
				rowData[10] = SaveData.WeaponObj.Skill_6.Name
				rowData[11] = SaveData.WeaponObj.Skill_7.Name
				rowData[12] = SaveData.WeaponObj.Skill_8.Name
				
				$('#Weapons_Table').dataTable().fnUpdate(rowData,rowIndex,undefined,false);

			}
			
			function LoadWeapons() {
				var currentOffset = SaveData.Offsets.General.Weapons
				var maxWeapons = 9999
				for(let i = 0; i < maxWeapons; i++) {
					CreateWeaponObj(currentOffset)
					currentOffset += 0x28
					if (currentOffset > SaveData.saveGame.length) {
						maxWeapons = 0
					}else{
						if(SaveData.WeaponObj.WeaponID != 65535 && SaveData.WeaponObj.ID < 212) {
							var TableRow = '<tr id="WeaponEditRow_' + i +'">'
							TableRow += '<td>' + SaveData.WeaponObj.Character + '</td>' 
							TableRow += '<td>' + SaveData.WeaponObj.Type + '</td>' 
							TableRow += '<td>' + SaveData.WeaponObj.Name + '</td>' 
							TableRow += '<td>' + SaveData.WeaponObj.Power + '</td>'
							TableRow += '<td>' + SaveData.WeaponObj.Stars + '</td>'
							TableRow += '<td>' + SaveData.WeaponObj.Skill_1.Name + '</td>'
							TableRow += '<td>' + SaveData.WeaponObj.Skill_2.Name + '</td>'
							TableRow += '<td>' + SaveData.WeaponObj.Skill_3.Name + '</td>'
							TableRow += '<td>' + SaveData.WeaponObj.Skill_4.Name + '</td>'
							TableRow += '<td>' + SaveData.WeaponObj.Skill_5.Name + '</td>'
							TableRow += '<td>' + SaveData.WeaponObj.Skill_6.Name + '</td>'
							TableRow += '<td>' + SaveData.WeaponObj.Skill_7.Name + '</td>'
							TableRow += '<td>' + SaveData.WeaponObj.Skill_8.Name + '</td>'
							TableRow += '<td><button type="button" class="btn btn-success" onclick="LoadWeaponEdit(CreateWeaponObj(' + (currentOffset - 0x28) + ', '+ i +'));">Edit Weapon</button></td>'
							TableRow += '</tr>'
							
							$('#Weapons_Table > tbody').append(TableRow)
						}
					}
				}
			}
			
			function LoadWeaponEdit_Types(loadNames  = false) {
				var SelectedChar = $('#WeaponEditCharname').val()
				for (var i = 0; i < SaveData.Characters.length; i++) {
					if (SelectedChar == SaveData.Characters[i].Name[SaveData.Lang]) {
						SaveData.WeaponObj.CharacterEN = SaveData.Characters[i].Name.EN
					}
				}
				$('#WeaponEditType').html('')
				
				for(let i = 0; i < 10; i++) {
					if (typeof SaveData.Weapons[SaveData.WeaponObj.CharacterEN][i] != 'undefined') {
						if(SaveData.WeaponObj.Type == SaveData.Weapons[SaveData.WeaponObj.CharacterEN][i].ClassName[SaveData.Lang]) {
							SaveData.WeaponObj.InternalCharID = i
						}
						$('#WeaponEditType').append('<option>' + SaveData.Weapons[SaveData.WeaponObj.CharacterEN][i].ClassName[SaveData.Lang] + '</option>')
					}
				}
				if (loadNames) {
					LoadWeaponEdit_Names(true)
				}
			}
			
			function LoadWeaponEdit_Names(fireChange) {
				var SelectedChar = $('#WeaponEditCharname').val()
				for (var i = 0; i < SaveData.Characters.length; i++) {
					if (SelectedChar == SaveData.Characters[i].Name[SaveData.Lang]) {
						SaveData.WeaponObj.CharacterEN = SaveData.Characters[i].Name.EN
					}
				}
				
				for(let i = 0; i < 10; i++) {
					if (typeof SaveData.Weapons[SaveData.WeaponObj.CharacterEN][i] != 'undefined') {
						if($('#WeaponEditType').val() == SaveData.Weapons[SaveData.WeaponObj.CharacterEN][i].ClassName[SaveData.Lang]) {
							SaveData.WeaponObj.InternalCharID = i
						}
					}
				}
				
				$('#WeaponEditName').html('')
				
				for(let i = 0; i < 10; i++) {
					if (typeof SaveData.Weapons[SaveData.WeaponObj.CharacterEN][SaveData.WeaponObj.InternalCharID].Weapons[i] != 'undefined') {
						$('#WeaponEditName').append('<option value="' + SaveData.Weapons[SaveData.WeaponObj.CharacterEN][SaveData.WeaponObj.InternalCharID].Weapons[i].WeaponID + '">[' + SaveData.Weapons[SaveData.WeaponObj.CharacterEN][SaveData.WeaponObj.InternalCharID].Weapons[i].Level + '] ' + SaveData.Weapons[SaveData.WeaponObj.CharacterEN][SaveData.WeaponObj.InternalCharID].Weapons[i].Name[SaveData.Lang] + '</option>')
					}
				}

				if (fireChange) {
					$('#WeaponEditName').change();
				}
			} 
			
			function LoadWeaponEdit(WeaponObj) {
				$('#WeaponEditCharname').html('')

				for(let i = 0; i < SaveData.Characters.length; i++) {
					$('#WeaponEditCharname').append('<option>' + SaveData.Characters[i].Name[SaveData.Lang] + '</option>')
				}				
				$('#WeaponEditCharname').val(SaveData.WeaponObj.Character);
				
				
				LoadWeaponEdit_Types()
				$('#WeaponEditType').val(SaveData.WeaponObj.Type);
				
				LoadWeaponEdit_Names()
				$('#WeaponEditName').val(SaveData.WeaponObj.ID);
				
				$('#WeaponEditAttack').val(SaveData.WeaponObj.Power);
				$('#WeaponEditStars').val(SaveData.WeaponObj.Stars);
				
				for(let z = 1; z <= 8; z++) {
					$('#WeaponEditSkill_' + z).val(SaveData.WeaponObj['Skill_' + z].ID)
					
					if (SaveData.WeaponObj['KillsToUnlockSkill_' + z] > 0) {
						$('#WeaponEditLocked_' + z).val(SaveData.WeaponObj['KillsToUnlockSkill_' + z]);
						$('#CheckboxWeaponEdit_' + z).prop('checked', true);
						$('#DivWeaponEditLocked_' + z).show();
					}
				}
				
				$('#Weapon_Modal').modal('show');
			}
			
			function ChangeLockedKills(SkillID) {
				var isChecked = $('#CheckboxWeaponEdit_' + SkillID).is(':checked')
				if(isChecked){
					$('#DivWeaponEditLocked_' + SkillID).show();
				} else {
					$('#DivWeaponEditLocked_' + SkillID).hide();
					$('#WeaponEditLocked_' + SkillID).val(0);
				}
			}

			//------------ Misc Stuff
	
			function VerifyInput(input, maxValue, ExtraType = 0, rarity = 0) {
				var newValue = input.val().replace(/\D/g,'');
				if(ExtraType == 2) { // multipler
					var StarBoost = ($('#WeaponEditStars').val() * 10)
					var currentPercent = StarBoost + 100
					maxValue = Math.floor(maxValue / currentPercent * 100)
				}
				if(newValue > maxValue) {
					newValue = maxValue
				}
				input.val(newValue)
				if (ExtraType == 1){
					if ($('#Material_Bulk_Edit_' + rarity).is(':checked')) {
						for(let i = 0;i < SaveData.Material[rarity].length; i++){
							$('#Material_' + rarity + '_' + i).val(newValue);
						}
					}
				}
			}
			
			function SaveMaterial(rarity) {
				for (let i = 0;i < SaveData.Material[rarity].length; i++){
					writeInt16(SaveData.Offsets.General.Material + (SaveData.Material[rarity][i].Offset * 2), $('#Material_' + rarity + '_' + i).val())
				}
			}

			function SaveCurrentProcess() {
				//--- General
				writeInt32(SaveData.Offsets.General.Rupees,$('#Rupees').val())
				
				//--- Material
				SaveMaterial('Bronze')
				SaveMaterial('Silver')
				SaveMaterial('Gold')		
				
				//--- Character
				writeInt08(SaveData.Offsets.Characters.Base + SaveData.Characters[SaveData.CharacterObj.ID].Offset + 0x0A,SaveData.CharacterObj.Unlocked) // 1 Byte
				writeInt08(SaveData.Offsets.Characters.Base + SaveData.Characters[SaveData.CharacterObj.ID].Offset + 0x0B,SaveData.CharacterObj.Unknown) // 1 Byte
				writeInt16(SaveData.Offsets.Characters.Base + SaveData.Characters[SaveData.CharacterObj.ID].Offset + 0x0C,SaveData.CharacterObj.Attack) // 2 Bytes
				writeInt16(SaveData.Offsets.Characters.Base + SaveData.Characters[SaveData.CharacterObj.ID].Offset + 0x0E,SaveData.CharacterObj.Unknown2) // 2 Bytes
				writeInt16(SaveData.Offsets.Characters.Base + SaveData.Characters[SaveData.CharacterObj.ID].Offset + 0x10,SaveData.CharacterObj.Health) // 2 Bytes // Totally unsure, but it seems to it in some way...
				writeInt32(SaveData.Offsets.Characters.Base + SaveData.Characters[SaveData.CharacterObj.ID].Offset + 0x12,SaveData.CharacterObj.Experience) // 4 Bytes
				writeInt32(SaveData.Offsets.Characters.Base + SaveData.Characters[SaveData.CharacterObj.ID].Offset + 0x16,SaveData.CharacterObj.Unknown3) // 4 Bytes
				writeInt08(SaveData.Offsets.Characters.Base + SaveData.Characters[SaveData.CharacterObj.ID].Offset + 0x1A,SaveData.CharacterObj.Level) // 1 Byte
				writeInt08(SaveData.Offsets.Characters.Base + SaveData.Characters[SaveData.CharacterObj.ID].Offset + 0x1B,SaveData.CharacterObj.HeartContainers) // 1 Byte
				
				//--- Weapon
				writeInt16(SaveData.WeaponObj.currentOffset + 0x00,SaveData.WeaponObj.KillsToUnlockSkill_1)
				writeInt16(SaveData.WeaponObj.currentOffset + 0x02,SaveData.WeaponObj.KillsToUnlockSkill_2)
				writeInt16(SaveData.WeaponObj.currentOffset + 0x04,SaveData.WeaponObj.KillsToUnlockSkill_3)
				writeInt16(SaveData.WeaponObj.currentOffset + 0x06,SaveData.WeaponObj.KillsToUnlockSkill_4)
				writeInt16(SaveData.WeaponObj.currentOffset + 0x08,SaveData.WeaponObj.KillsToUnlockSkill_5)
				writeInt16(SaveData.WeaponObj.currentOffset + 0x0A,SaveData.WeaponObj.KillsToUnlockSkill_6)
				writeInt16(SaveData.WeaponObj.currentOffset + 0x0C,SaveData.WeaponObj.KillsToUnlockSkill_7)
				writeInt16(SaveData.WeaponObj.currentOffset + 0x0E,SaveData.WeaponObj.KillsToUnlockSkill_8)
				writeInt16(SaveData.WeaponObj.currentOffset + 0x10,SaveData.WeaponObj.ID)
				if(SaveData.WeaponObj.ID != 65535 && SaveData.WeaponObj.ID < 212) {
					writeInt16(SaveData.WeaponObj.currentOffset + 0x12,SaveData.WeaponObj.Power)
					writeInt16(SaveData.WeaponObj.currentOffset + 0x14,SaveData.WeaponObj.Stars)
					for(let i = 1;i < 9;i++) {
						SaveData.saveGame[SaveData.WeaponObj.currentOffset + 0x15 + i] = SaveData.WeaponObj['Skill_' + i].ID
					}

					SaveData.saveGame[SaveData.WeaponObj.currentOffset + 0x1E] = SaveData.WeaponObj.Identifier
				}

			}
			
			function DownloadFile() {
				SaveCurrentProcess()

				var file = new Blob([new Uint8Array(SaveData.saveGame)], {type: 'application/octet-stream'});
				var downloadUrl = URL.createObjectURL(file);
				var a = document.createElement("a");
				a.href = downloadUrl;
				a.download = "zmha.bin";
				document.body.appendChild(a);
				a.click();				
			}

			function DrawDataTable() {
				setTimeout(function() {
					var Width_Th_1 = $('#Weapons_Table > thead > tr').find('th').eq(0).find('span').eq(0).width()
					var Width_Select_1 = $('#Weapons_Table > thead > tr').find('th').eq(0).find('div').eq(0).width()
					$('#Weapons_Table > thead > tr').find('th').eq(0).css('width',Width_Th_1 + Width_Select_1 + 15)

					var Width_Th_1 = $('#Weapons_Table > thead > tr').find('th').eq(1).find('span').eq(0).width()
					var Width_Select_1 = $('#Weapons_Table > thead > tr').find('th').eq(1).find('div').eq(0).width()
					$('#Weapons_Table > thead > tr').find('th').eq(1).css('width',Width_Th_1 + Width_Select_1 + 15)
					
					var Width_Th_1 = $('#Weapons_Table > thead > tr').find('th').eq(2).find('span').eq(0).width()
					var Width_Select_1 = $('#Weapons_Table > thead > tr').find('th').eq(2).find('div').eq(0).width()
					$('#Weapons_Table > thead > tr').find('th').eq(2).css('width',Width_Th_1 + Width_Select_1 + 15)
				}, 200);
			}
			
			function LoadAddFilter() {
					    var oTable,
							oTable2;
					    
					    oTable = $('#Weapons_Table').DataTable({
							stateSave: false,
							"autoWidth": false,
							"columns": [
								null,
								null,
								null,
								{ "width": "1px" },
								{ "width": "1px" },
								{ "width": "80px" },
								{ "width": "80px" },
								{ "width": "80px" },
								{ "width": "80px" },
								{ "width": "80px" },
								{ "width": "80px" },
								{ "width": "80px" },
								{ "width": "80px" },
								null,
							  ]
					    });
					    
					    yadcf.init(oTable, [{
					        column_number: 0,
							filter_match_mode: 'exact'
					    }, {
					        column_number: 1
					    }, {
					        column_number: 2
					    }]);
						SaveData.dataTable = oTable
			}
							
			function LoadBadges() {
				BaseAddr = DecryptedFile.LoadedCharacterOffset - 0x18
				
				$('#Attack_Badges').find('div').each(function() {
					var imgObj = $(this).find('img').eq(0)
					var badgeInfo = imgObj.attr('src').replace('images/','').replace('.png','').split('_')
					var badgeAddr = DecryptedFile.Badges[badgeInfo[0]][badgeInfo[2]-1][0]
					var badgeBit = DecryptedFile.Badges[badgeInfo[0]][badgeInfo[2]-1][1]
					var isSet = DecryptedFile.saveGame[BaseAddr + badgeAddr] & badgeBit
					if(isSet > 0) {
						imgObj.show();
					}else{
						imgObj.hide();
					}
				});
				
			
				$('#Def_Badges').find('div').each(function() {
					var imgObj = $(this).find('img').eq(0)
					var badgeInfo = imgObj.attr('src').replace('images/','').replace('.png','').split('_')
					var badgeAddr = DecryptedFile.Badges[badgeInfo[0]][badgeInfo[2]-1][0]
					var badgeBit = DecryptedFile.Badges[badgeInfo[0]][badgeInfo[2]-1][1]
					var isSet = DecryptedFile.saveGame[BaseAddr + badgeAddr] & badgeBit
					if(isSet > 0) {
						imgObj.show();
					}else{
						imgObj.hide();
					}
				});

				$('#Support_Badges').find('div').each(function() {
					var imgObj = $(this).find('img').eq(0)
					var badgeInfo = imgObj.attr('src').replace('images/','').replace('.png','').split('_')
					var badgeAddr = DecryptedFile.Badges[badgeInfo[0]][badgeInfo[2]-1][0]
					var badgeBit = DecryptedFile.Badges[badgeInfo[0]][badgeInfo[2]-1][1]
					var isSet = DecryptedFile.saveGame[BaseAddr + badgeAddr] & badgeBit
					if(isSet > 0) {
						imgObj.show();
					}else{
						imgObj.hide();
					}
				});
				
				$('#Badges_Modal').modal('show');
			}
						
			function ToggleSubImg(ClickedBadge) {
				ClickedBadge.find('img').eq(0).toggle();
				CalculateBadges();
			}
			
			function CalculateBadges() {
				BaseAddr = DecryptedFile.LoadedCharacterOffset - 0x18
				DecryptedFile.saveGame[BaseAddr] = 0
				DecryptedFile.saveGame[BaseAddr+1] = 0
				DecryptedFile.saveGame[BaseAddr+2] = 0
				DecryptedFile.saveGame[BaseAddr+3] = 0
				DecryptedFile.saveGame[BaseAddr+4] = 0
				DecryptedFile.saveGame[BaseAddr+5] = 0
				DecryptedFile.saveGame[BaseAddr+6] = 0
				DecryptedFile.saveGame[BaseAddr+7] = 0
				DecryptedFile.saveGame[BaseAddr+8] = 0
				
				$('#Attack_Badges').find('div').each(function() {
					var imgObj = $(this).find('img').eq(0)
					if ( imgObj.css('display') != 'none' ){
						var badgeInfo = imgObj.attr('src').replace('images/','').replace('.png','').split('_')
						var badgeAddr = DecryptedFile.Badges[badgeInfo[0]][badgeInfo[2]-1][0]
						var badgeBit = DecryptedFile.Badges[badgeInfo[0]][badgeInfo[2]-1][1]
						DecryptedFile.saveGame[BaseAddr + badgeAddr] = DecryptedFile.saveGame[BaseAddr + badgeAddr] + badgeBit
					}
				});

				$('#Def_Badges').find('div').each(function() {
					var imgObj = $(this).find('img').eq(0)
					if ( imgObj.css('display') != 'none' ){
						var badgeInfo = imgObj.attr('src').replace('images/','').replace('.png','').split('_')
						var badgeAddr = DecryptedFile.Badges[badgeInfo[0]][badgeInfo[2]-1][0]
						var badgeBit = DecryptedFile.Badges[badgeInfo[0]][badgeInfo[2]-1][1]
						DecryptedFile.saveGame[BaseAddr + badgeAddr] = DecryptedFile.saveGame[BaseAddr + badgeAddr] + badgeBit
					}
				});

				$('#Support_Badges').find('div').each(function() {
					var imgObj = $(this).find('img').eq(0)
					if ( imgObj.css('display') != 'none' ){
						var badgeInfo = imgObj.attr('src').replace('images/','').replace('.png','').split('_')
						var badgeAddr = DecryptedFile.Badges[badgeInfo[0]][badgeInfo[2]-1][0]
						var badgeBit = DecryptedFile.Badges[badgeInfo[0]][badgeInfo[2]-1][1]
						DecryptedFile.saveGame[BaseAddr + badgeAddr] = DecryptedFile.saveGame[BaseAddr + badgeAddr] + badgeBit
					}
				});
			}
			
			function AddAllBadges(Page) {
				$('#' + Page + '_Badges').find('div').each(function() {
					var imgObj = $(this).find('img').eq(0)
					imgObj.show();
				});
				CalculateBadges()
			}
			
			function RemoveAllBadges(Page) {
				$('#' + Page + '_Badges').find('div').each(function() {
					var imgObj = $(this).find('img').eq(0)
					imgObj.hide();
				});
				CalculateBadges()
			}
					
			function ChangedWeapon() {
				var currentOffset = DecryptedFile.WeaponObj.currentOffset
				writeInt16(DecryptedFile.saveGame, currentOffset + 0x10,$('#WeaponEditName').val())
				writeInt16(DecryptedFile.saveGame, currentOffset + 0x12,$('#WeaponEditAttack').val())
				writeInt16(DecryptedFile.saveGame, currentOffset + 0x14,$('#WeaponEditStars').val())
				DecryptedFile.saveGame[currentOffset + 0x16] = $('#WeaponEditSkill_1').val()
				DecryptedFile.saveGame[currentOffset + 0x17] = $('#WeaponEditSkill_2').val()
				DecryptedFile.saveGame[currentOffset + 0x18] = $('#WeaponEditSkill_3').val()
				DecryptedFile.saveGame[currentOffset + 0x19] = $('#WeaponEditSkill_4').val()
				DecryptedFile.saveGame[currentOffset + 0x1A] = $('#WeaponEditSkill_5').val()
				DecryptedFile.saveGame[currentOffset + 0x1B] = $('#WeaponEditSkill_6').val()
				DecryptedFile.saveGame[currentOffset + 0x1C] = $('#WeaponEditSkill_7').val()
				DecryptedFile.saveGame[currentOffset + 0x1D] = $('#WeaponEditSkill_8').val()
				writeInt16(DecryptedFile.saveGame, currentOffset + 0x00,$('#WeaponEditLocked_1').val())
				writeInt16(DecryptedFile.saveGame, currentOffset + 0x02,$('#WeaponEditLocked_2').val())
				writeInt16(DecryptedFile.saveGame, currentOffset + 0x04,$('#WeaponEditLocked_3').val())
				writeInt16(DecryptedFile.saveGame, currentOffset + 0x06,$('#WeaponEditLocked_4').val())
				writeInt16(DecryptedFile.saveGame, currentOffset + 0x08,$('#WeaponEditLocked_5').val())
				writeInt16(DecryptedFile.saveGame, currentOffset + 0x0A,$('#WeaponEditLocked_6').val())
				writeInt16(DecryptedFile.saveGame, currentOffset + 0x0C,$('#WeaponEditLocked_7').val())
				writeInt16(DecryptedFile.saveGame, currentOffset + 0x0E,$('#WeaponEditLocked_8').val())
				
				
				var row = $('#WeaponEditRow_' + DecryptedFile.WeaponObj.rowID)
				var rowData = DecryptedFile.dataTable.row(row).data();
				var rowIndex = DecryptedFile.dataTable.row(row).index();
				
				rowData[0] = DecryptedFile.WeaponNameAndChars[$('#WeaponEditName').val()][0];
				rowData[1] = DecryptedFile.WeaponNameAndChars[$('#WeaponEditName').val()][1];
				rowData[2] = DecryptedFile.WeaponNameAndChars[$('#WeaponEditName').val()][2];
				rowData[3] = $('#WeaponEditAttack').val();
				rowData[4] = $('#WeaponEditStars').val();
				rowData[5] = GetSkillName($('#WeaponEditSkill_1').val());
				rowData[6] = GetSkillName($('#WeaponEditSkill_2').val());
				rowData[7] = GetSkillName($('#WeaponEditSkill_3').val());
				rowData[8] = GetSkillName($('#WeaponEditSkill_4').val());
				rowData[9] = GetSkillName($('#WeaponEditSkill_5').val());
				rowData[10] = GetSkillName($('#WeaponEditSkill_6').val());
				rowData[11] = GetSkillName($('#WeaponEditSkill_7').val());
				rowData[12] = GetSkillName($('#WeaponEditSkill_8').val());
				
				$('#Weapons_Table').dataTable().fnUpdate(rowData,rowIndex,undefined,false);
			}
			
			function MaxoutWeapon() {
				$('#WeaponEditAttack').val(500)
				$('#WeaponEditStars').val(5)
				$('#WeaponEditSkill_1').val(48)
				$('#WeaponEditSkill_2').val(34)
				$('#WeaponEditSkill_3').val(54)
				$('#WeaponEditSkill_4').val(37)
				$('#WeaponEditSkill_5').val(18)
				$('#WeaponEditSkill_6').val(19)
				$('#WeaponEditSkill_7').val(20)
				$('#WeaponEditSkill_8').val(44)
				UpdateWeaponObj()
			}

			function LoadTile(MapName, TileNr) {
				for(var i = 0; i < 128; i++) {
					$('#AventureMap_' + i).css('outline','none')
				}
				$('#AventureMap_' + TileNr).css('outline','1px solid blue')
				var baseOffset = SaveData.Offsets.Maps[MapName].Base;
				var LevelIsUnlocked = baseOffset + 0x4 + (TileNr * 4)
				//console.log('Tile: ' + TileNr + ' ' + SaveData.saveGame[LevelIsUnlocked])
				
				var TileHtml = '<div class="form-group">'
				TileHtml += '<label for="TileEditLocked">Locked: </label>'
				TileHtml += '<select class="form-control" id="TileEditLocked" style="width: 50%; display: inline-block;margin-left: 65px;" onchange="UpdateTile(\'' + MapName + '\', ' + TileNr + ');">'
				TileHtml += '<option value="0">Locked</option>'
				TileHtml += '<option value="1" disabled>Beaten</option>'
				TileHtml += '<option value="2">Unlocked</option>'
				TileHtml += '<option value="3">Beaten and Unlocked</option>'
				TileHtml += '</select>'
				TileHtml += '</div>'
				$('#AventureMapTiletEdit').html(TileHtml)
				$('#TileEditLocked').val(SaveData.saveGame[LevelIsUnlocked])
			}
			
			function UpdateTile(MapName, TileNr) {
				var baseOffset = SaveData.Offsets.Maps[MapName].Base;
				var LevelIsUnlocked = baseOffset + 0x4 + (TileNr * 4)
				SaveData.saveGame[LevelIsUnlocked] = $('#TileEditLocked').val()				
			}
			
			(function($){
				$.fn.disableSelection = function() {
					return this
						 .attr('unselectable', 'on')
						 .css('user-select', 'none')
						 .on('selectstart', false);
				};
			})(jQuery);
			
			function onlyUnique(value, index, self) { 
				return self.indexOf(value) === index;
			}
			
			$(function() {
				$('#Badges_Modal').disableSelection()
				$('#Weapon_Modal').disableSelection()
			});
			
			function CalcAdventureMap() {
				if($('#AdventureMapClick').width() == 0) {
					setTimeout(CalcAdventureMap,10)
				} else {
					var OneTileWidth = $('#AdventureMapClick').width()/16
					var OneTileHeight = $('#AdventureMapClick').height()/8
					for(let y = 0; y < 8; y++) {
						for(let x = 0; x < 16; x++) {
							$('#AdventureMapClick').append('<div id="AventureMap_' + ((y*16) + x) + '" onclick="LoadTile(\'AdventureMap\','+ ((y*16) + x) +');" style="position: absolute;top:' + (y * OneTileHeight) + 'px;left:' + (x * OneTileWidth) + 'px;width: ' + OneTileWidth + 'px;height: ' + OneTileHeight + 'px;"></div>');
						}
					}
				}
				
				UpdateBulkEditButtons('AdventureMap');
			}
			
			function UpdateBulkEditButtons(MapName) {
				var DisableButton = true
				for (var i = 0; i < 8; i++) {
					if (SaveData.saveGame[SaveData.Offsets.Maps[MapName].NoFog + i] != 0x1) {
						DisableButton = false
					}
				}
				$('#' + MapName + 'RemoveFog').prop('disabled',DisableButton)
				
				var DisableButton = true
				for(var i = 0; i < SaveData.Offsets.Maps[MapName].LevelCount; i ++) {
					var TileOffset = SaveData.Offsets.Maps[MapName].Unlocked + (i * 4)
					if(SaveData.saveGame[TileOffset] < 2) {
						DisableButton = false
					}
				}
				$('#' + MapName + 'UnlockTiles').prop('disabled',DisableButton)
				
				var DisableButton = true
				for (var i = 0; i < SaveData.Offsets.Maps[MapName].LevelCount; i++) {
					if(SaveData.saveGame[SaveData.Offsets.Maps[MapName].Searched + i] != 0x1) {
						DisableButton = false
					}
				}
				$('#' + MapName + 'SearchTiles').prop('disabled',DisableButton)		
				
				var DisableButton = true
				for (var i = 0; i < SaveData.Offsets.Maps[MapName].LevelCount; i++) {
					if(SaveData.saveGame[SaveData.Offsets.Maps[MapName].EnemiesHidden + i] != 0x1) {
						DisableButton = false
					}
				}
				$('#' + MapName + 'UnhideEnemies').prop('disabled',DisableButton)
				
				
				var DisableButton = true
				for(var i = 0; i < SaveData.Offsets.Maps[MapName].LevelCount; i ++) {
					var TileOffset = SaveData.Offsets.Maps[MapName].Unlocked + (i * 4)
					if(SaveData.saveGame[TileOffset + 0] != 0x3) {
						DisableButton = false
					}
					
					var TileOffset = SaveData.Offsets.Maps[MapName].Beaten + i
					if(SaveData.saveGame[TileOffset + 0] != 0xE0) {
						DisableButton = false
					}

					if(SaveData.saveGame[SaveData.Offsets.Maps[MapName].EnemiesHidden + i] != 0x1) {
						DisableButton = false
					}

					var TileOffset = SaveData.Offsets.Maps[MapName].Medal + i
					if(SaveData.saveGame[TileOffset + 0] != 0x3) {
						DisableButton = false
					}
				}
				$('#' + MapName + 'RankA').prop('disabled',DisableButton)
				
			}
			
			function RemoveFogFromMap(MapName) {
				for (var i = 0; i < 8; i++) {
					SaveData.saveGame[SaveData.Offsets.Maps[MapName].NoFog + i] = 0x1
				}
				$('#' + MapName + 'RemoveFog').prop('disabled',true)
			}
			
			function UnlockTiles(MapName) {
				for(var i = 0; i < SaveData.Offsets.Maps[MapName].LevelCount; i ++) {
					var TileOffset = SaveData.Offsets.Maps[MapName].Unlocked + (i * 4)
					if(SaveData.saveGame[TileOffset] < 2) {
						SaveData.saveGame[TileOffset + 0] = 0x2
						SaveData.saveGame[TileOffset + 1] = 0x0
						SaveData.saveGame[TileOffset + 2] = 0x0
						SaveData.saveGame[TileOffset + 3] = 0x0
					}
				}
				$('#' + MapName + 'UnlockTiles').prop('disabled',true)
			}

			function SearchTiles(MapName) {
				for (var i = 0; i < SaveData.Offsets.Maps[MapName].LevelCount; i++) {
					SaveData.saveGame[SaveData.Offsets.Maps[MapName].Searched + i] = 0x1
				}
				$('#' + MapName + 'SearchTiles').prop('disabled',true)
			}
			
			function UnhideEnemies(MapName) {
				for (var i = 0; i < SaveData.Offsets.Maps[MapName].LevelCount; i++) {
					SaveData.saveGame[SaveData.Offsets.Maps[MapName].EnemiesHidden + i] = 0x1
				}
				$('#' + MapName + 'UnhideEnemies').prop('disabled',true)
			}
			
			function RankAOnAllTiles(MapName) {
				for(var i = 0; i < SaveData.Offsets.Maps[MapName].LevelCount; i ++) {
					var TileOffset = SaveData.Offsets.Maps[MapName].Unlocked + (i * 4)
					SaveData.saveGame[TileOffset + 0] = 0x3
					SaveData.saveGame[TileOffset + 1] = 0x0
					SaveData.saveGame[TileOffset + 2] = 0x0
					SaveData.saveGame[TileOffset + 3] = 0x0
					
					var TileOffset = SaveData.Offsets.Maps[MapName].Beaten + (i * 8)
					SaveData.saveGame[TileOffset + 0] = 0xE0
					SaveData.saveGame[TileOffset + 1] = 0x01
					SaveData.saveGame[TileOffset + 2] = 0x00
					SaveData.saveGame[TileOffset + 3] = 0x00
					SaveData.saveGame[TileOffset + 4] = 0x00
					SaveData.saveGame[TileOffset + 5] = 0x00
					SaveData.saveGame[TileOffset + 6] = 0x00
					SaveData.saveGame[TileOffset + 7] = 0x00

					SaveData.saveGame[SaveData.Offsets.Maps[MapName].EnemiesHidden + i] = 0x1

					var TileOffset = SaveData.Offsets.Maps[MapName].Medal + (i * 4)
					/*SaveData.saveGame[TileOffset + 0] = 0x3
					SaveData.saveGame[TileOffset + 1] = 0x0
					SaveData.saveGame[TileOffset + 2] = 0x0
					SaveData.saveGame[TileOffset + 3] = 0x0	*/			
					SaveData.saveGame[TileOffset + 0] = 0xFF
					SaveData.saveGame[TileOffset + 1] = 0xFF
					SaveData.saveGame[TileOffset + 2] = 0xFF
					SaveData.saveGame[TileOffset + 3] = 0xFF				
				}
				
				for (var i = 0; i < 8; i++) {
					SaveData.saveGame[SaveData.Offsets.Maps[MapName].NoFog + i] = 0x1
				}
				
				$('#' + MapName + 'RemoveFog').prop('disabled',true)
				$('#' + MapName + 'UnlockTiles').prop('disabled',true)
				$('#' + MapName + 'UnhideEnemies').prop('disabled',true)
				$('#' + MapName + 'RankA').prop('disabled',true)
			}
			
		</script>
		<style>
			html {
				overflow-y: scroll; 
			}		
		</style>
	</head>
	<body>
		<div class="container text-center" id="main">
			<div class="row">
				<div style="margin-left: auto;margin-right: auto;width:50%">
					<br>
					<div class="panel panel-primary">
						<div class="panel-heading">
							<h3 class="panel-title">Load Hyrule Warriors Definite Edition SaveFile</h3>
						</div>
						<div class="panel-body">
							<div class="row">
								<div>
									<input type="file" id="fileinput" class='form-control-file' style='display: inline-block;'>
									<br>
									<br>
									<input type="submit" class="btn btn-primary" value="Load" style="width:100px;margin:auto;" name="go" onclick='handleFileSelect();'>
									<input type="submit" class="btn btn-primary" value="Save" style="width:100px;margin:auto;" name="go" onclick='DownloadFile();'>
								</div>
							</div>
							<div>
								<a href="#"><img src="flags/blank.gif" id="Lang_DE" class="flag flag-de" onclick="SetLang('DE');"/></a>
								<a href="#"><img src="flags/blank.gif" id="Lang_EN" class="flag flag-us" onclick="SetLang('EN');"/></a>
								<a href="#"><img src="flags/blank.gif" id="Lang_FR" class="flag flag-fr" onclick="SetLang('FR');"/></a>
								<a href="#"><img src="flags/blank.gif" id="Lang_ES" class="flag flag-es" onclick="SetLang('ES');"/></a>
							</div>
						</div>
					</div>
				</div>
				<div class="col-sm-12 col-md-6" style="margin-left: auto;margin-right: auto;display:none;">
					<br>
					<div class="panel panel-primary" style="height: 146px;">
						<div class="panel-body" style="padding: 0px;text-align: left; padding-left: 5px;">
							Error Log:
						</div>
						<div id="ErrorLog" class="panel-body" style="padding: 0px;text-align: left;padding-left: 5px;max-height: 122px;overflow-y: scroll;">
							
						</div>
					</div>
				</div>
			</div>
		</div>
		<div style="width: 90%;margin: 0 auto;">
			<div id="MainEditContainer" style="display:none";>
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#GeneralEdit">General & Character Edit</a></li>
					<li><a data-toggle="tab" href="#MaterialEdit">Material Edit</a></li>
				    <li><a data-toggle="tab" href="#WeaponEdit" onclick="DrawDataTable()">Weapon Edit</a></li>
				    <li><a data-toggle="tab" href="#AdventureMode" onclick="CalcAdventureMap();">Adventure Mode</a></li>
				</ul>
				<br>
				<div class="tab-content">
					<div id="GeneralEdit" class="tab-pane fade in active">
						<div style="width: 49%;display: inline-block;vertical-align: top;">
							<div class="panel panel-primary" style="vertical-align: top;">
								<div class="panel-heading">
									<h3 class="panel-title">General</h3>
								</div>
								<div class="panel-body">
									<div>
										<span style="margin-left: 15px;line-height: 34px;">Rupees</span>
										<input value="" type="text" id="Rupees" class="form-control" style="display: inline-block;width: 50%;float: right;margin-right: 15px;" onchange="VerifyInput($(this), 9999999);" onkeyup="VerifyInput($(this), 9999999);">
									</div>
									<div>
										<button type="button" class="btn btn-warning" style="width:calc(100% - 30px);margin-left:15px;margin-top:15px;" id="DiscoverAllMaterials" onclick="DiscoverAllMaterials();">Discover all Materials</button>
									</div>
								</div>
							</div>
						</div>
						<div style="width: 49%;display: inline-block;vertical-align: top;float:right;">
							<div class="panel panel-primary" style="vertical-align: top;">
								<div class="panel-heading">
									<h3 class="panel-title">Character
										<div class="form-group" style="display: inline-block;float: right;margin-top: -7px;">
										  <select class="form-control" id="Character_Edit_Select" style="height: 31px;" onchange="LoadCharacterEdit()";>
											
										  </select>
										</div>
									</h3>
								</div>
								<div class="panel-body" id="Character_Panel_Body">
									<div>
										<span style="margin-left: 15px;line-height: 34px;">Please Select a Character to Edit</span>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div id="MaterialEdit" class="tab-pane fade in">
						<div class="panel panel-primary" style="width: 33%;display: inline-block;vertical-align: top;float:left;">
							<div class="panel-heading">
								<h3 class="panel-title">Bronze Material 
									<span style="float:right">
										<input type="checkbox" class="form-check-input" id="Material_Bulk_Edit_Bronze">
										<label class="form-check-label" for="Material_Bulk_Edit_Bronze">Bulk Edit</label>
									</span>
								</h3>
							</div>
							<div class="panel-body" id="Material_Panel_Body_Bronze">
							</div>
						</div>
						<div class="panel panel-primary" style="width: 33%;display: inline-block;vertical-align: top;margin-left: 5px;">
							<div class="panel-heading">
								<h3 class="panel-title">Silver Material  
									<span style="float:right">
										<input type="checkbox" class="form-check-input" id="Material_Bulk_Edit_Silver">
										<label class="form-check-label" for="Material_Bulk_Edit_Silver">Bulk Edit</label>
									</span>
								</h3>
							</div>
							<div class="panel-body" id="Material_Panel_Body_Silver">
							</div>
						</div>
						<div class="panel panel-primary" style="width: 33%;display: inline-block;vertical-align: top;float:right;">
							<div class="panel-heading">
								<h3 class="panel-title">Gold Material  
									<span style="float:right">
										<input type="checkbox" class="form-check-input" id="Material_Bulk_Edit_Gold">
										<label class="form-check-label" for="Material_Bulk_Edit_Gold">Bulk Edit</label>
									</span>
								</h3>
							</div>
							<div class="panel-body" id="Material_Panel_Body_Gold">
							</div>
						</div>
					</div>
					<div id="WeaponEdit" class="tab-pane fade in">
						<div class="panel panel-primary" style="width: 100%;display: inline-block;">
							<div class="panel-heading">
								<h3 class="panel-title">Weapons
								</h3>
							</div>
							<div class="panel-body" id="Weapons_Body">
								<table class="table" id ="Weapons_Table">
									<thead>
										<tr>
											<th><span>Character</span></th>
											<th><span>Type</span></th>
											<th><span>Name</span></th>
											<th>Attack</th>
											<th>Stars</th>
											<th>Skill 1</th>
											<th>Skill 2</th>
											<th>Skill 3</th>
											<th>Skill 4</th>
											<th>Skill 5</th>
											<th>Skill 6</th>
											<th>Skill 7</th>
											<th>Skill 8</th>
											<th>Edit</th>
										</tr>
									</thead>
									<tbody>
									</tbody>
								</table>
							</div>
						</div>
					</div>
					<div id="AdventureMode" class="tab-pane fade in">
						<div class="panel panel-primary" style="width: 100%;display: inline-block;">
							<div class="panel-heading">
								<h3 class="panel-title">Adventure-Mode
								</h3>
							</div>
							<div class="panel-body" id="AdventureMode_Body">
								<ul class="nav nav-pills nav-stacked" style="width:190px;display:inline-block">
									<li class="active"><a data-toggle="tab" href="#AdventureMap" onclick="CalcAdventureMap();">Adventure Map</a></li>
									<li><a data-toggle="tab" href="#ComingSoon">Great Sea Map</a></li>
									<li><a data-toggle="tab" href="#ComingSoon">Master Quest Map</a></li>
									<li><a data-toggle="tab" href="#ComingSoon">Master Wind Waker Map</a></li>
									<li><a data-toggle="tab" href="#ComingSoon">Twilight Map</a></li>
									<li><a data-toggle="tab" href="#ComingSoon">Termina Map</a></li>
									<li><a data-toggle="tab" href="#ComingSoon">Koholint Island Map</a></li>
									<li><a data-toggle="tab" href="#ComingSoon">Grand Travels Map</a></li>
									<li><a data-toggle="tab" href="#ComingSoon">Lorule Map</a></li>
									<li><a data-toggle="tab" href="#ComingSoon">Rewards Map</a></li>
								</ul>
								<div class="tab-content" style="display:inline-block;vertical-align: top;width: calc(100% - 200px);">
									<div id="AdventureMap" class="tab-pane fade in active">
										<div id="AdventureMapClick" style="position:relative;display:inline-block;width: calc(100% - 275px);">
											<img src="images/maps/AdventureMap.png" style="width: 100%;" />
											<script>
											</script>
										</div>
										<div style="vertical-align: top;display:inline-block;width: 270px;">
											<div class="panel panel-primary">
												<div class="panel-heading">
													<h3 class="panel-title">Bulk Edit</h3>
												</div>
												<div class="panel-body" id="AventureMapBulkEdit">
													<button type="button" class="btn btn-warning" style="width:calc(100% - 30px);margin-left:15px;" id="AdventureMapRemoveFog" onclick="RemoveFogFromMap('AdventureMap');">Remove Fog from Map</button>
													<button type="button" class="btn btn-warning" style="width:calc(100% - 30px);margin-left:15px;margin-top:10px;" id="AdventureMapUnlockTiles" onclick="UnlockTiles('AdventureMap');">Unlock all Tiles</button>
													<button type="button" class="btn btn-warning" style="width:calc(100% - 30px);margin-left:15px;margin-top:10px;" id="AdventureMapSearchTiles" onclick="SearchTiles('AdventureMap');">Use Search on every Tile</button>
													<button type="button" class="btn btn-warning" style="width:calc(100% - 30px);margin-left:15px;margin-top:10px;" id="AdventureMapUnhideEnemies" onclick="UnhideEnemies('AdventureMap');">Unhide all Enemies</button>
													<button type="button" class="btn btn-warning" style="width:calc(100% - 30px);margin-left:15px;margin-top:10px;" id="AdventureMapRankA" onclick="RankAOnAllTiles('AdventureMap');">Rank A on all Tiles (=100%)</button>
												</div>
											</div>
											<div class="panel panel-primary">
												<div class="panel-heading">
													<h3 class="panel-title">Tiles Edit</h3>
												</div>
												<div class="panel-body" id="AventureMapTiletEdit">
													<div>
														<span style="margin-left: 15px;line-height: 34px;">Click on a Tile to Edit it</span>
													</div>
												</div>
											</div>
										</div>
									</div>
									<div id="ComingSoon" class="tab-pane fade in">
										Coming soon...
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="modal" tabindex="-1" role="dialog" id="Badges_Modal">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Edit Badges for Character N/A</h5>
					</div>
				<div class="modal-body">
					<ul class="nav nav-tabs">
						<li class="active"><a data-toggle="tab" href="#AttackBadge">Attack Badge</a></li>
						  <li><a data-toggle="tab" href="#DefenseBadge">Defense Badge</a></li>
						  <li><a data-toggle="tab" href="#AssistBadge">Assist Badge</a></li>
					</ul>
					
					<div class="tab-content">
						<div id="AttackBadge" class="tab-pane fade in active">
							<div style="text-align: center;position: relative;margin-top: 15px;" id="Attack_Badges"><img src="images/attack_badge_base.png">
								<div style="cursor: pointer;position: absolute;top: 156px;left: 63px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_1.png" style="width: 72px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 156px;left: 137px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_2.png" style="width: 72px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 156px;left: 212px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_3.png" style="width: 72px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 156px;left: 287px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_4.png" style="width: 72px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 304px;left: 137px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_5.png" style="width: 89px;margin-left: -10px;margin-top: -5px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 304px;left: 212px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_6.png" style="width: 89px;margin-left: -10px;margin-top: -5px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 304px;left: 287px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_7.png" style="width: 89px;margin-left: -8px;margin-top: -2px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 379px;left: 287px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_8.png" style="width: 88px;margin-left: -9px;margin-top: -7px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 379px;left: 360px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_9.png" style="width: 88px;margin-left: -4px;margin-top: -8px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 232px;left: 212px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_10.png" style="width: 88px;margin-left: -12px;margin-top: -8px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 232px;left: 287px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_11.png" style="width: 79px;margin-left: -6px;margin-top: -8px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 232px;left: 360px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_12.png" style="width: 81px;margin-left: -4px;margin-top: -8px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 83px;left: 287px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_13.png" style="width: 87px;margin-left: -10px;margin-top: -5px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 83px;left: 360px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_14.png" style="width: 83px;margin-left: -8px;margin-top: -8px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 83px;left: 435px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_15.png" style="width: 84px;margin-left: -10px;margin-top: -12px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 9px;left: 212px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_16.png" style="width: 85px;margin-left: -10px;margin-top: -1px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 9px;left: 287px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_17.png" style="width: 81px;margin-left: -10px;margin-top: 2px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 9px;left: 360px;height:70px;width:70px" onclick="ToggleSubImg($(this));">
									<img src="images/attack_badge_18.png" style="width: 81px;margin-left: -4px;margin-top: -4px;display:none;">
								</div>
							</div>
							<div style="text-align: center;margin-top: 15px;">
								<button type="button" class="btn btn-success" onclick="AddAllBadges('Attack');">Add all on this page</button>
								<button type="button" class="btn btn-danger" onclick="RemoveAllBadges('Attack');">Remove All on this page</button>
							</div>
						</div>
						<div id="DefenseBadge" class="tab-pane fade">
							<div style="text-align: center;position: relative;margin-top: 15px;" id="Def_Badges"><img src="images/def_badge_base.png">
								<div style="cursor: pointer;position: absolute;top: 161px;left: 106px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_1.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 161px;left: 179px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_2.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 161px;left: 254px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_3.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 235px;left: 179px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_4.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 235px;left: 254px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_5.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 235px;left: 329px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_6.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 310px;left: 179px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_7.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 310px;left: 254px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_8.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 310px;left: 329px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_9.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 384px;left: 179px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_10.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 384px;left: 254px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_11.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 384px;left: 329px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_12.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 458px;left: 179px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_13.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 458px;left: 254px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_14.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 458px;left: 329px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_15.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 532px;left: 179px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_16.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 532px;left: 254px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_17.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 532px;left: 329px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_18.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 87px;left: 254px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_19.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 87px;left: 329px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_20.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 87px;left: 402px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_21.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 13px;left: 179px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_22.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 13px;left: 254px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_23.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 13px;left: 329px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/def_badge_24.png" style="width: 42px;;margin-left: -1px;margin-top: 11px;display:none;">
								</div>
							</div>
							<div style="text-align: center;margin-top: 15px;">
								<button type="button" class="btn btn-success" onclick="AddAllBadges('Def');">Add all on this page</button>
								<button type="button" class="btn btn-danger" onclick="RemoveAllBadges('Def');">Remove All on this page</button>
							</div>
						</div>
						<div id="AssistBadge" class="tab-pane fade">
							<div style="text-align: center;position: relative;margin-top: 15px;" id="Support_Badges"><img src="images/support_badge_base.png">
								<div style="cursor: pointer;position: absolute;top: 13px;left: 67px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/support_badge_1.png" style="margin-left: -1px;margin-top: 9px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 13px;left: 142px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/support_badge_2.png" style="margin-left: -1px;margin-top: 9px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 13px;left: 216px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/support_badge_3.png" style="margin-left: -1px;margin-top: 9px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 87px;left: 141px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/support_badge_4.png" style="margin-left: -1px;margin-top: 9px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 87px;left: 216px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/support_badge_5.png" style="margin-left: -1px;margin-top: 9px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 162px;left: 216px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/support_badge_6.png" style="margin-left: -1px;margin-top: 9px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 161px;left: 290px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/support_badge_7.png" style="margin-left: -1px;margin-top: 9px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 235px;left: 290px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/support_badge_8.png" style="margin-left: -1px;margin-top: 9px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 236px;left: 364px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/support_badge_9.png" style="margin-left: -1px;margin-top: 9px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 310px;left: 364px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/support_badge_10.png" style="margin-left: -1px;margin-top: 9px;display:none;">
								</div>
								<div style="cursor: pointer;position: absolute;top: 310px;left: 439px;height:63px;width:63px" onclick="ToggleSubImg($(this));">
									<img src="images/support_badge_11.png" style="margin-left: -1px;margin-top: 9px;display:none;">
								</div>
							</div>
							<div style="text-align: center;margin-top: 15px;">
								<button type="button" class="btn btn-success" onclick="AddAllBadges('Support');">Add all on this page</button>
								<button type="button" class="btn btn-danger" onclick="RemoveAllBadges('Support');">Remove All on this page</button>
							</div>
						</div>
						
					</div>
				</div>
				<div class="modal-footer">
					
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				</div>
			</div>
		  </div>
		</div>
		<div class="modal" tabindex="-1" role="dialog" id="Weapon_Modal">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Edit Weapon</h5>
					</div>
				<div class="modal-body">
					<div class="form-group">
						<label for="WeaponEditCharname">Character</label>
						<select class="form-control" id="WeaponEditCharname" style="width: 50%; display: inline-block;margin-left: 214px;" onchange="LoadWeaponEdit_Types(true);"></select>
					</div>
					<div class="form-group">
						<label for="WeaponEditType">Type</label>
						<select class="form-control" id="WeaponEditType" style="width: 50%; display: inline-block;margin-left: 247px;" onchange="LoadWeaponEdit_Names(true);"></select>
					</div>
					<div class="form-group">
						<label for="WeaponEditName">Name</label>
						<select class="form-control" id="WeaponEditName" style="width: 50%; display: inline-block;margin-left: 241px;" onchange="UpdateWeaponObj();"></select>
					</div>
					<div class="form-group">
						<label for="WeaponEditName">Attack</label>
						<input type="text" class="form-control" id="WeaponEditAttack" style="width: 50%; display: inline-block;margin-left: 236px;" onchange="VerifyInput($(this),999,2);UpdateWeaponObj();" onkeyup="VerifyInput($(this),999,2)">
					</div>
					<div class="form-group">
						<label for="WeaponEditName">Stars</label>
						<select class="form-control" id="WeaponEditStars" style="width: 50%; display: inline-block;margin-left: 244px;" onchange="UpdateWeaponObj();">
							<option value="0">0 Stars</option>
							<option value="1">1 Star</option>
							<option value="2">2 Stars</option>
							<option value="3">3 Stars</option>
							<option value="4">4 Stars</option>
							<option value="5">5 Stars</option>
						</select>
					</div>
					<div class="form-group">
						<label for="WeaponEditSkill_1">Skill 1</label>
						<label class="checkbox-inline" style="margin-left: 160px;"><input type="checkbox" value="" onchange="ChangeLockedKills(1);UpdateWeaponObj();" id="CheckboxWeaponEdit_1">Locked</label>
						<select class="form-control" id="WeaponEditSkill_1" style="width: 50%; display: inline-block;margin-left: 10px;" onchange="UpdateWeaponObj();"></select>
					</div>
					<div class="form-group" style="display:none;" id="DivWeaponEditLocked_1">
						<label for="WeaponEditLocked_1" style="margin-left: 168px">Kills to Unlock:</label>
						<input type="text" value="0" class="form-control" id="WeaponEditLocked_1" style="width: 50%; display: inline-block;margin-left: 10px;" onchange="VerifyInput($(this),65535);UpdateWeaponObj();" onkeyup="VerifyInput($(this),65535);UpdateWeaponObj();"></input>
					</div>
					<div class="form-group">
						<label for="WeaponEditSkill_2">Skill 2</label>
						<label class="checkbox-inline" style="margin-left: 160px;"><input type="checkbox" value="" onchange="ChangeLockedKills(2);UpdateWeaponObj();" id="CheckboxWeaponEdit_2">Locked</label>
						<select class="form-control" id="WeaponEditSkill_2" style="width: 50%; display: inline-block;margin-left: 10px;" onchange="UpdateWeaponObj();"></select>
					</div>
					<div class="form-group" style="display:none;" id="DivWeaponEditLocked_2">
						<label for="WeaponEditLocked_2" style="margin-left: 168px">Kills to Unlock:</label>
						<input type="text" value="0" class="form-control" id="WeaponEditLocked_2" style="width: 50%; display: inline-block;margin-left: 10px;" onchange="VerifyInput($(this),65535);UpdateWeaponObj();" onkeyup="VerifyInput($(this),65535);UpdateWeaponObj();"></input>
					</div>
					<div class="form-group">
						<label for="WeaponEditSkill_3">Skill 3</label>
						<label class="checkbox-inline" style="margin-left: 160px;"><input type="checkbox" value="" onchange="ChangeLockedKills(3);UpdateWeaponObj();" id="CheckboxWeaponEdit_3">Locked</label>
						<select class="form-control" id="WeaponEditSkill_3" style="width: 50%; display: inline-block;margin-left: 10px;" onchange="UpdateWeaponObj();"></select>
					</div>
					<div class="form-group" style="display:none;" id="DivWeaponEditLocked_3">
						<label for="WeaponEditLocked_3" style="margin-left: 168px">Kills to Unlock:</label>
						<input type="text" value="0" class="form-control" id="WeaponEditLocked_3" style="width: 50%; display: inline-block;margin-left: 10px;" onchange="VerifyInput($(this),65535);UpdateWeaponObj();" onkeyup="VerifyInput($(this),65535);UpdateWeaponObj();"></input>
					</div>
					<div class="form-group">
						<label for="WeaponEditSkill_4">Skill 4</label>
						<label class="checkbox-inline" style="margin-left: 160px;"><input type="checkbox" value="" onchange="ChangeLockedKills(4);UpdateWeaponObj();" id="CheckboxWeaponEdit_4">Locked</label>
						<select class="form-control" id="WeaponEditSkill_4" style="width: 50%; display: inline-block;margin-left: 10px;" onchange="UpdateWeaponObj();"></select>
					</div>
					<div class="form-group" style="display:none;" id="DivWeaponEditLocked_4">
						<label for="WeaponEditLocked_4" style="margin-left: 168px">Kills to Unlock:</label>
						<input type="text" value="0" class="form-control" id="WeaponEditLocked_4" style="width: 50%; display: inline-block;margin-left: 10px;" onchange="VerifyInput($(this),65535);UpdateWeaponObj();" onkeyup="VerifyInput($(this),65535);UpdateWeaponObj();"></input>
					</div>
					<div class="form-group">
						<label for="WeaponEditSkill_5">Skill 5</label>
						<label class="checkbox-inline" style="margin-left: 160px;"><input type="checkbox" value="" onchange="ChangeLockedKills(5);UpdateWeaponObj();" id="CheckboxWeaponEdit_5">Locked</label>
						<select class="form-control" id="WeaponEditSkill_5" style="width: 50%; display: inline-block;margin-left: 10px;" onchange="UpdateWeaponObj();"></select>
					</div>
					<div class="form-group" style="display:none;" id="DivWeaponEditLocked_5">
						<label for="WeaponEditLocked_5" style="margin-left: 168px">Kills to Unlock:</label>
						<input type="text" value="0" class="form-control" id="WeaponEditLocked_5" style="width: 50%; display: inline-block;margin-left: 10px;" onchange="VerifyInput($(this),65535);UpdateWeaponObj();" onkeyup="VerifyInput($(this),65535);UpdateWeaponObj();"></input>
					</div>
					<div class="form-group">
						<label for="WeaponEditSkill_6">Skill 6</label>
						<label class="checkbox-inline" style="margin-left: 160px;"><input type="checkbox" value="" onchange="ChangeLockedKills(6);UpdateWeaponObj();" id="CheckboxWeaponEdit_6">Locked</label>
						<select class="form-control" id="WeaponEditSkill_6" style="width: 50%; display: inline-block;margin-left: 10px;" onchange="UpdateWeaponObj();"></select>
					</div>
					<div class="form-group" style="display:none;" id="DivWeaponEditLocked_6">
						<label for="WeaponEditLocked_6" style="margin-left: 168px">Kills to Unlock:</label>
						<input type="text" value="0" class="form-control" id="WeaponEditLocked_6" style="width: 50%; display: inline-block;margin-left: 10px;" onchange="VerifyInput($(this),65535);UpdateWeaponObj();" onkeyup="VerifyInput($(this),65535);UpdateWeaponObj();"></input>
					</div>
					<div class="form-group">
						<label for="WeaponEditSkill_7">Skill 7</label>
						<label class="checkbox-inline" style="margin-left: 160px;"><input type="checkbox" value="" onchange="ChangeLockedKills(7);UpdateWeaponObj();" id="CheckboxWeaponEdit_7">Locked</label>
						<select class="form-control" id="WeaponEditSkill_7" style="width: 50%; display: inline-block;margin-left: 10px;" onchange="UpdateWeaponObj();"></select>
					</div>
					<div class="form-group" style="display:none;" id="DivWeaponEditLocked_7">
						<label for="WeaponEditLocked_7" style="margin-left: 168px">Kills to Unlock:</label>
						<input type="text" value="0" class="form-control" id="WeaponEditLocked_7" style="width: 50%; display: inline-block;margin-left: 10px;" onchange="VerifyInput($(this),65535);UpdateWeaponObj();" onkeyup="VerifyInput($(this),65535);UpdateWeaponObj();"></input>
					</div>
					<div class="form-group">
						<label for="WeaponEditSkill_8">Skill 8</label>
						<label class="checkbox-inline" style="margin-left: 160px;"><input type="checkbox" value="" onchange="ChangeLockedKills(8);UpdateWeaponObj();" id="CheckboxWeaponEdit_8">Locked</label>
						<select class="form-control" id="WeaponEditSkill_8" style="width: 50%; display: inline-block;margin-left: 10px;" onchange="UpdateWeaponObj();"></select>
					</div>
					<div class="form-group" style="display:none;" id="DivWeaponEditLocked_8">
						<label for="WeaponEditLocked_8" style="margin-left: 168px">Kills to Unlock:</label>
						<input type="text" value="0" class="form-control" id="WeaponEditLocked_8" style="width: 50%; display: inline-block;margin-left: 10px;" onchange="VerifyInput($(this),65535);UpdateWeaponObj();" onkeyup="VerifyInput($(this),65535);UpdateWeaponObj();"></input>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" onclick="MaxoutWeapon();">Maxout Weapon</button>
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
		</div>
	</body>
</html>